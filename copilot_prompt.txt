# 🧩 작업 요청: MCP Web Search 서버 생성

이 파일은 GitHub Copilot Chat(Claude 3.5 Sonnet / Sonnet 4.5)에게 지시할 프롬프트입니다.  
리포지토리 루트 경로에 `./copilot_prompt.txt` 로 저장되어 있습니다.

---

## 🎯 목표

- DuckDuckGo 검색 결과를 가져와 Copilot Chat에 전달하는 MCP 서버를 작성합니다.
- MCP 표준 SDK(`@modelcontextprotocol/sdk`)를 사용해 STDIO 방식 서버로 구현합니다.
- Copilot Chat에서 명령을 통해 `"web.search"` 툴을 호출할 수 있어야 합니다.

---

## 📁 폴더 구조

```
mcp-websearch/
 ├─ package.json
 ├─ server.js
 ├─ README.md
 ├─ .gitignore
 └─ copilot_prompt.txt
```

---

## 🧩 server.js 요구사항

- Node.js ESM(`type: module`) 환경에서 실행 가능해야 함.
- `@modelcontextprotocol/sdk/server/index.js` 와 `@modelcontextprotocol/sdk/server/stdio.js`를 사용.
- 툴 이름: `web.search`
- 입력 스키마:
  ```json
  {
    "q": "string (검색어, 필수)",
    "count": "number (최대 결과 수, 기본 5)"
  }
  ```
- 동작:
  1. DuckDuckGo HTML 검색 결과(`https://duckduckgo.com/html/?q=`)를 요청.
  2. `cheerio` 로 파싱하여 `(제목, 링크, 요약)` 배열 생성.
  3. Copilot Chat으로 전달할 수 있는 JSON 또는 Markdown 텍스트를 반환.

---

## 📦 package.json 요구사항

- 주요 의존성:
  ```json
  {
    "@modelcontextprotocol/sdk": "^0.1.0",
    "node-fetch": "^3.3.2",
    "cheerio": "^1.0.0-rc.12"
  }
  ```
- `"bin"` 필드로 `mcp-websearch` 명령을 제공할 것.
- `"type": "module"` 지정.

---

## 🧹 기타 파일

- `.gitignore`: `node_modules`, `npm-debug.log`, `.DS_Store`
- `README.md`: 이미 존재하므로 수정하지 말 것.
- `MIT License` 유지.

---

## 🧪 테스트 방법 (생성 후 안내에 포함)

1. `npm install`
2. `node server.js`
3. VS Code → Copilot Chat → Tools → Add MCP Server  
   - Command: `node`  
   - Args: `path/to/server.js`  
   - Transport: `stdio`
4. Copilot Chat 대화창에서 아래 명령으로 테스트:  
   ```
   @websearch.web.search { "q": "express middleware example", "count": 3 }
   ```

---

## 🗣️ 출력 형식

- `package.json` 전체 코드
- `server.js` 전체 코드
- `.gitignore` 내용
- Copilot Chat에 등록 및 테스트 안내 (요약 버전)

---

## ⚠️ 주의사항
- 코드 외의 불필요한 설명은 최소화.
- Node.js 최신 버전(>=20.x) 기준으로 작성.
- STDIO 방식만 사용 (웹서버 아님).
